import{d as g,r as T,a as x,o as i,c as u,b as s,e as P,u as p,P as C,f as L,g as b,t as d,F as S,h as k,n as I,p as h,i as $,_ as M,j as F,s as N}from"./index-8b68547d.js";const z=o=>(h("data-v-5db53cf2"),o=o(),$(),o),B=z(()=>s("br",null,null,-1)),O=g({__name:"audioPlayer",setup(o){const r=T(null),e=x({isPlay:!1,list:["Test 1.MP3","Test 2.MP3","Test 3.MP3"],currentPlay:0,duration:0,currentTime:0,volume:1,playSpeed:1,currentSrc:"",playMode:"",lrcSplit:[],currentLine:-1}),a=async l=>{if(e.currentPlay+=l,e.currentPlay<0&&(e.currentPlay=e.list.length-1),e.currentPlay>=e.list.length&&(e.currentPlay=0),e.currentSrc="/audio/"+e.list[e.currentPlay],r.value.src=e.currentSrc,r.value.play().then(()=>{e.isPlay=!0,e.duration=r.value.duration}),e.currentSrc.substring(e.currentSrc.lastIndexOf(".")+1).toUpperCase()=="MP3"){let _=e.currentSrc.substring(0,e.currentSrc.lastIndexOf("."))+".lrc",c=new XMLHttpRequest;c.open("GET",_,!1),c.overrideMimeType("text/html;charset=gb2312"),c.send(null);let m=c.responseText.split(`
`);e.lrcSplit.length=0;for(var t in m){var n=m[t].match(/\[(\d+:\d+\.\d+)\]/);n!=null&&e.lrcSplit.push({id:t,time:n.pop(),text:m[t].replace(/^.+?\]/,""),timeLen:v(n.pop())})}}console.log(e.lrcSplit)},y=function(){console.log(r.value),r.value.Pause(),e.isPlay=!1,console.log("123123"),console.log("123123")},f=async()=>{e.currentTime=r.value.currentTime;for(var l in e.lrcSplit)if(r.value.currentTime<e.lrcSplit[l].timeLen){e.currentLine=parseInt(l);return}},v=function(l){let t=l.replace("[","").replace("]","").split(":");return parseInt(t[0])*60+parseFloat(t[1])};return(l,t)=>(i(),u(S,null,[s("audio",{ref_key:"audio",ref:r,onTimeupdate:f},null,544),s("button",{type:"button",onClick:t[0]||(t[0]=n=>a(-1))},"上一首"),s("button",{type:"button",onClick:t[1]||(t[1]=n=>a(0))},"播放"),P(p(C),{size:"24",fill:"#333",onClick:t[2]||(t[2]=n=>a(0))}),P(p(L),{size:"24",fill:"#f60",onClick:y}),s("button",{type:"button",onClick:t[3]||(t[3]=n=>a(1))},"下一首"),B,b(" "+d(e.currentTime)+" ",1),s("div",null,[(i(!0),u(S,null,k(e.lrcSplit,(n,_)=>(i(),u("p",{class:I(["line",e.currentLine==_?" currentClass lrcp":"lrcp"])},d(n.text),3))),256))])],64))}});const V=M(O,[["__scopeId","data-v-5db53cf2"]]),w={class:"card"},H=g({__name:"HelloWorld",setup(o){const r=F(),{audio:e,currentTime:a}=N(r),y=async()=>{r.play()},f=async()=>{r.togglePlay()};return(v,l)=>(i(),u("div",w,[s("button",{type:"button",onClick:y},"播放"),s("button",{type:"button",onClick:f},"暂停和开始"),b(" "+d(p(e).currentTime)+" "+d(p(a))+" ",1),P(V)]))}});export{H as default};
